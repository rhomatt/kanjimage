(this.webpackJsonpkanjimage=this.webpackJsonpkanjimage||[]).push([[0],{118:function(e,n,t){},119:function(e,n,t){},120:function(e,n,t){},177:function(e,n){},179:function(e,n){},191:function(e,n){},193:function(e,n){},292:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t(10),c=t.n(a),u=t(111),s=t.n(u),o=(t(118),t(119),t(3)),i=t.n(o),f=t(8),l=t(34);var p=function(e){var n=e.clickHandler,t=e.text;return Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:n,children:t})})};var b=function(e){var n=e.min,t=e.max,a=e.value,c=e.slideHandler;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{className:"slider",type:"range",min:n,max:t,onInput:c}),a]})},d=(t(120),function(e,n){for(var t,r=0;r<e.length;r++){var a=e[r];if(console.log(a),a.type.match(/image\/.*/)){t=a.getAsFile();break}}var c=new FileReader;c.onload=function(){var e=Object(f.a)(i.a.mark((function e(r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:a=e.sent,n({buff:a,base64:r.target.result});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t&&c.readAsDataURL(t)});var g=function(e){return Object(r.jsxs)("div",{className:"dropzone",onDragOver:function(e){e.preventDefault()},onDrop:function(n){console.log("File dropped"),n.preventDefault();var t=n.dataTransfer.items;d(t,e.setImage)},children:[e.render()?null:"Paste image from clipboard or drag and drop here",Object(r.jsx)("img",{id:"image",src:e.render(),alt:""})]})},v=t(112),j=t.n(v),x=t(16),m=t.n(x),h=t(291),O={};O.enlargeImage=function(){var e=Object(f.a)(i.a.mark((function e(n){var t,r,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.read(n);case 3:return t=e.sent,r=2*t.bitmap.width,a=2*t.bitmap.height,console.log(t),t.resize(r,a,m.a.RESIZE_BICUBIC),e.next=9,t.getBase64Async(m.a.AUTO);case 9:return c=e.sent,e.next=12,t.getBufferAsync(m.a.AUTO);case 12:return u=e.sent,e.abrupt("return",{buff:u,base64:c});case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(n){return e.apply(this,arguments)}}(),O.blur=function(){var e=Object(f.a)(i.a.mark((function e(n,t){var r,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=1,e.prev=1,e.next=4,m.a.read(n);case 4:return a=e.sent,t?a.gaussian(r):a.blur(r),e.next=8,a.getBase64Async(m.a.AUTO);case 8:return c=e.sent,e.next=11,a.getBufferAsync(m.a.AUTO);case 11:return u=e.sent,e.abrupt("return",{buff:u,base64:c});case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(n,t){return e.apply(this,arguments)}}(),O.threshold=function(){var e=Object(f.a)(i.a.mark((function e(n){var t,r,a,c,u,s,o,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>1&&void 0!==f[1]?f[1]:128,r=document.createElement("canvas"),console.log(r),a=function(e){return h.thresholding(e,t)},h.filterImage(r,a,n),c=r.toDataURL("image/png"),u=new Promise((function(e,n){r.toBlob((function(n){console.log(1,n),e(n)}))})),e.next=9,u;case 9:return s=e.sent,console.log(2,s),e.next=13,s.arrayBuffer();case 13:return o=e.sent,e.abrupt("return",{buff:o,base64:c});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O.recognize=function(){var e=Object(f.a)(i.a.mark((function e(n){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("processing..."),e.next=3,j.a.recognize(n,"jpn");case 3:return t=e.sent,console.log(t),console.log(t.data.text),e.abrupt("return",t.data.text);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var w=O;var k=function(){var e=Object(a.useState)({buff:null,base64:null}),n=Object(l.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),o=s[0],v=s[1],j=Object(a.useState)(128),x=Object(l.a)(j,2),m=x[0],h=x[1],O=function(e){var n=e.clipboardData.items;console.log(n),d(n,c)};Object(a.useEffect)((function(){document.addEventListener("paste",O)}),[]),Object(a.useEffect)((function(){t.base64&&(v("Loading..."),w.recognize(t.base64).then((function(e){console.log(e),v(e)})))}),[t]);var k=function(){var e=Object(f.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.buff){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w.enlargeImage(t.buff);case 4:n=e.sent,c(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.buff){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w.blur(t.buff,!0);case 4:n=e.sent,c(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("image"),e.next=3,w.threshold(n,m);case 3:t=e.sent,console.log("newimage",t),c(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[t.base64?void 0:"no image",Object(r.jsx)(g,{render:function(){return t.base64},setImage:function(e){return c(e)}}),Object(r.jsx)(p,{clickHandler:k,text:"Enlarge by x2"}),Object(r.jsx)(p,{clickHandler:y,text:"Gausian blur"}),Object(r.jsx)(b,{min:0,max:255,value:m,slideHandler:function(e){h(parseInt(e.target.value))}}),Object(r.jsx)(p,{clickHandler:I,text:"threshold"}),o]})};var y=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(k,{})})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,293)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,u=n.getTTFB;t(e),r(e),a(e),c(e),u(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root")),I()}},[[292,1,2]]]);
//# sourceMappingURL=main.01538c2d.chunk.js.map